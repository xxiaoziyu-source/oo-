function love.load()
    -- çª—å£è®¾ç½®
    love.window.setTitle("Dreamkill UI Demo")
    love.window.setMode(800, 600, {resizable = true})

    -- é¢œè‰²å®šä¹‰
    local colors = {
        primary = {126/255, 34/255, 206/255, 0.8},
        secondary = {6/255, 182/255, 212/255, 0.8},
        dark = {30/255, 41/255, 59/255, 0.9},
        light = {248/255, 250/255, 252/255, 1},
        gray = {100/255, 116/255, 139/255, 0.6}
    }
    _G.colors = colors

    -- å·¦ä¾§èœå•æ•°æ®
    local leftMenu = {
        {title = "Word", isSelected = true},
        {title = "Combat", icon = "âš¡"},
        {title = "Movement", icon = "â¡ï¸"},
        {title = "Render", icon = "ğŸ‘ï¸"},
        {title = "Player", icon = "ğŸ‘¤"},
        {title = "Misc", icon = "â“"},
        {title = "Configurations", icon = "âš™ï¸", isConfig = true},
        {title = "å¯¼å…¥é…ç½®", icon = "â•", isButton = true},
        {title = "å¸ƒå‰å²›", isSub = true},
        {title = "EC", isSub = true},
        {title = "èŠ±é›¨åº­", isSub = true},
        {title = "ç§Ÿèµæœ", isSub = true},
    }
    _G.leftMenu = leftMenu

    -- å³ä¾§åŠŸèƒ½å¼€å…³æ•°æ®
    local toggles = {
        {name = "ç‚¹å‡»ç ´å", desc = "å‡†å¿ƒæŒ‡å‘çš„åœ°æ–¹ç‚¹å‡»å³å¯ç ´å."},
        {name = "çŸ©é˜µç ´å", desc = "å‘ç ´åçš„é‚£ä¸ªç‚¹åŠå¾„å»¶ä¼¸ç ´ånæ ¼."},
        {name = "è·å–æƒé™", desc = "å¼ºåˆ¶è·å–ç®¡ç†/æˆå‘˜æƒé™."},
        {name = "æ¸¸æˆæ¨¡å¼", desc = "å¼ºåˆ¶è·å–åˆ›é€ /ç”Ÿå­˜/å†’é™©/æ—è§‚æ¨¡å¼."},
        {name = "è‡ªåŠ¨æ­è·¯", desc = "æœå‘è„šåº•è‡ªåŠ¨æ­æ–¹å—."},
    }
    _G.toggles = toggles
    for i, v in ipairs(toggles) do
        v.enabled = false
    end

    -- é¡¶éƒ¨æ çŠ¶æ€
    _G.topTab = "Word"
end

function love.update(dt)
    -- æ­¤å¤„å¯æ·»åŠ äº¤äº’é€»è¾‘ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ã€æ‹–æ‹½ç­‰ï¼‰
end

function love.draw()
    -- èƒŒæ™¯
    love.graphics.clear(0.1, 0.1, 0.1)

    -- é¡¶éƒ¨æ 
    drawTopBar()

    -- å·¦ä¾§èœå•
    drawLeftMenu()

    -- å³ä¾§å†…å®¹åŒº
    drawRightContent()

    -- ç‰ˆæœ¬ä¿¡æ¯
    love.graphics.setColor(colors.gray)
    love.graphics.printf("Dreamkill Version:3.0.5", 10, love.graphics.getHeight() - 30, 200, "left")
    love.graphics.printf("6 times uid:001", love.graphics.getWidth() - 150, love.graphics.getHeight() - 30, 150, "right")
end

-- ç»˜åˆ¶é¡¶éƒ¨æ 
function drawTopBar()
    local w, h = love.graphics.getWidth(), 50
    love.graphics.setColor(colors.primary[1], colors.primary[2], colors.primary[3], 0.3)
    love.graphics.rectangle("fill", 0, 0, w, h)

    -- å·¦ä¾§å›¾æ ‡ä¸æ ‡é¢˜
    love.graphics.setColor(colors.light)
    love.graphics.print("â˜°", 20, 15, 0, 1.5)
    love.graphics.print("Dreamkill", 50, 15, 0, 1.5)

    -- ä¸­é—´æ ‡ç­¾é¡µ
    love.graphics.setColor(colors.light)
    love.graphics.print("ğŸ”", 150, 20)
    love.graphics.setColor(colors.primary)
    love.graphics.rectangle("fill", 170, 10, 100, 30, 5)
    love.graphics.setColor(colors.light)
    love.graphics.print("Word +", 180, 18)

    -- å³ä¾§çª—å£æŒ‰é’®
    love.graphics.setColor(colors.light)
    love.graphics.print("â€”", w - 60, 15, 0, 2)
    love.graphics.print("ğŸ——", w - 30, 15, 0, 1.5)
end

-- ç»˜åˆ¶å·¦ä¾§èœå•
function drawLeftMenu()
    local w, h = 200, love.graphics.getHeight() - 50
    love.graphics.setColor(colors.dark)
    love.graphics.rectangle("fill", 0, 50, w, h)

    -- èœå•é€‰é¡¹ç»˜åˆ¶
    local y = 60
    for i, item in ipairs(leftMenu) do
        local isSelected = item.isSelected or false
        local isConfig = item.isConfig or false
        local isButton = item.isButton or false
        local isSub = item.isSub or false

        -- èƒŒæ™¯æ ·å¼
        if isSelected or isConfig or isButton then
            love.graphics.setColor(colors.primary[1], colors.primary[2], colors.primary[3], 0.5)
        elseif isSub then
            love.graphics.setColor(colors.dark)
        else
            love.graphics.setColor(colors.dark[1], colors.dark[2], colors.dark[3], 0.3)
        end
        love.graphics.rectangle("fill", 10, y, w - 20, 30, 3)

        -- æ–‡å­—ä¸å›¾æ ‡
        love.graphics.setColor(colors.light)
        if item.icon then
            love.graphics.print(item.icon .. " " .. item.title, 30, y + 5)
        else
            love.graphics.print(item.title, 30, y + 5)
        end

        y = y + 35
    end
end

-- ç»˜åˆ¶å³ä¾§å†…å®¹åŒº
function drawRightContent()
    local x, y = 200, 50
    local w, h = love.graphics.getWidth() - 200, love.graphics.getHeight() - 50
    love.graphics.setColor(colors.dark[1], colors.dark[2], colors.dark[3], 0.6)
    love.graphics.rectangle("fill", x, y, w, h)

    -- åŠŸèƒ½å¼€å…³ç»˜åˆ¶
    local toggleY = 70
    for i, toggle in ipairs(toggles) do
        -- å¼€å…³èƒŒæ™¯
        love.graphics.setColor(colors.dark)
        love.graphics.rectangle("fill", x + 20, toggleY, w - 40, 40, 5)

        -- å¼€å…³åç§°ä¸æè¿°
        love.graphics.setColor(colors.light)
        love.graphics.print(toggle.name, x + 30, toggleY + 5, 0, 1.2)
        love.graphics.setColor(colors.gray)
        love.graphics.print(toggle.desc, x + 30, toggleY + 25, 0, 0.8)

        -- å¼€å…³æŒ‰é’®
        local toggleW = 50
        local toggleX = x + w - 70
        love.graphics.setColor(toggle.enabled and colors.primary or colors.gray)
        love.graphics.rectangle("fill", toggleX, toggleY + 10, toggleW, 20, 10)
        love.graphics.setColor(toggle.enabled and colors.light or colors.dark)
        love.graphics.circle("fill", toggle.enabled and toggleX + toggleW - 10 or toggleX + 10, toggleY + 20, 8)

        toggleY = toggleY + 50
    end
end

-- å¤„ç†é¼ æ ‡ç‚¹å‡»ï¼ˆç¤ºä¾‹ï¼šå¼€å…³äº¤äº’ï¼‰
function love.mousepressed(x, y, button)
    if button ~= 1 then return end

    local contentX, contentY = 200, 50
    local contentW, contentH = love.graphics.getWidth() - 200, love.graphics.getHeight() - 50
    if x < contentX or x > contentX + contentW or y < contentY or y > contentY + contentH then
        return
    end

    local toggleY = 70
    for i, toggle in ipairs(toggles) do
        local toggleX = contentX + contentW - 70
        local toggleW = 50
        local toggleH = 20
        if x > toggleX and x < toggleX + toggleW and y > toggleY + 10 and y < toggleY + 30 then
            toggle.enabled = not toggle.enabled
        end
        toggleY = toggleY + 50
    end
end
